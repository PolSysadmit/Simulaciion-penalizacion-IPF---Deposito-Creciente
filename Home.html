<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>REINTEGRO DEPOSITO CRECIENTE 18M - Penalización por días transcurridos (Tarifas coyunturales)</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <style>
    body {
      font-family: Verdana, Geneva, sans-serif;
      font-size: 12px;
    }

    input {
      width: 90px;
      text-align: right;
      font-family: Verdana, Geneva, sans-serif;
      font-size: 12px;
    }

    input[type="date"] {
      box-sizing: border-box;
      width: 98px;
    }

    td.clase-sangria {
      padding-left: 5px;
    }

    .input-EurosWrapper input,
    .input-PorcientoWrapper input {
      margin-right: 20px;
    }

    .input-EurosWrapper,
    .input-PorcientoWrapper {
      position: relative;
    }

    .input-EurosWrapper::after {
      content: "€";
      position: absolute;
      right: 10px;
      top: 45%;
      transform: translateY(-50%);
    }

    .input-PorcientoWrapper::after {
      content: "%";
      position: absolute;
      right: 5px;
      top: 48%;
      transform: translateY(-50%);
    }

    .TituloCalculadora,
    .TituloResultado {
      font-weight: bold;
      background-color: #E2EFDA;
    }

    .TituloResultado {
      text-align: center;
    }

    .input-error {
      border-color: red;
    }

    .input-error-message {
      color: red;
      font-weight: bold;
    }

    .calculadora {
      width: auto;
    }

    table.calculadora td {
      white-space: normal;
      height: auto;
      width: auto;
    }

    td label {
      display: block;
      width: auto;
    }

    .error {
      color: red;
      display: block;
      white-space: normal;
      width: auto;
      height: auto;
    }

    .resultados td:nth-child(2),
    .resultados td:nth-child(5),
    .resultados td:nth-child(8) {
      text-align: right;
    }

    .resultados td:nth-child(1),
    .resultados td:nth-child(3),
    .resultados td:nth-child(4),
    .resultados td:nth-child(7) {
      font-weight: bold;
      padding-right: 5px;
    }

    .TituloSimulacion {
      border: 1px solid black;
    }

    .total-row,
    .total-row td {
      font-weight: bold;
      border: 1px solid black;
    }

    .euro-cell::after,
    .percent-cell::after {
      margin-right: 1px;
    }

    button {
      background-color: #00594F;
      border: none;
      color: white;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 14px;
      margin: 4px 2px;
      transition-duration: 0.4s;
      cursor: pointer;
      height: 30px;
      width: 200px;
    }

    table {
      border-collapse: collapse;
    }

    tr.noBorder td {
      font-weight: bold;
      background-color: rgb(227, 240, 216);
      border-width: 0;
    }
  </style>
</head>

<body>
  <h1>REINTEGRO DEPOSITO CRECIENTE 18M - Penalización por días transcurridos (Tarifas coyunturales)</h1>
  <form id="calculadora">
    <table class="calculadora" style="border: hidden">
      <tr>
        <td>
          <label for="Importe">Importe (euros):</label>
        </td>
        <td>
          <div class="input-EurosWrapper">
            <input type="text" id="Importe" name="Importe" value="100000" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td>
          <label for="FechaInicio">Fecha inicio:</label>
        </td>
        <td><input type="date" id="FechaInicio" name="FechaInicio" value="2023-03-15"></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td>
          <label for="FechaVencimiento">Fecha vencimiento:</label>
        </td>
        <td><input type="date" id="FechaVencimiento" name="FechaVencimiento" readonly disabled></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="PorcentajePenalizacion"> % Penalización Reintegro:</label></td>
        <td>
          <div class="input-PorcientoWrapper">
            <input type="text" id="PorcentajePenalizacion" name="PorcentajePenalizacion" value="2" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="PorcentajeRetencion">% Retención</label></td>
        <td>
          <div class="input-PorcientoWrapper">
            <input type="text" id="PorcentajeRetencion" name="PorcentajeRetencion" value="19" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>

      <tr>
        <td colspan="2" class="TituloResultado">1er SEMESTRE</td>
      </tr>
      <tr>
        <td>Fecha liquidación</td>
        <td><input type="date" id="FechaLiquidacion1" name="FechaLiquidacion1" value="2023-09-15"></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      <tr>
        <td>
          <label for="TipoInteres1">% Tipo de interés:</label>
        </td>
        <td>
          <div class="input-PorcientoWrapper">
            <input type="text" id="TipoInteres1" name="TipoInteres1" value="2.75" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr id="ImporteReintegroContainer1">
        <td><label for="ImporteReintegro1">Importe reintegro (euros):</label></td>
        <td>
          <div class="input-EurosWrapper">
            <input type="text" id="ImporteReintegro1" name="ImporteReintegro1" value="500" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="FechaReintegro1">Fecha reintegro:</label></td>
        <td><input type="date" id="FechaReintegro1" name="FechaReintegro1" value="2023-05-15"></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td>&nbsp;</td>
        <td></td>
      </tr>

      <tr>
        <td colspan="2" class="TituloResultado">2º SEMESTRE</td>
      </tr>
      <tr>
        <td>Fecha liquidación</td>
        <td>
          <input type="date" id="FechaLiquidacion2" name="FechaLiquidacion2" value="2024-03-15">
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="TipoInteres2">% Tipo de interés:</label></td>
        <td>
          <div class="input-PorcientoWrapper">
            <input type="text" id="TipoInteres2" name="TipoInteres2" value="3" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr id="ImporteReintegroContainer2">
        <td><label for="ImporteReintegro2">Importe reintegro (euros):</label></td>
        <td>
          <div class="input-EurosWrapper">
            <input type="text" id="ImporteReintegro2" name="ImporteReintegro2" value="700" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="FechaReintegro2">Fecha reintegro:</label></td>
        <td><input type="date" id="FechaReintegro2" name="FechaReintegro2" value="2023-10-15"></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td></td>
        <td>&nbsp;</td>
      </tr>

      <tr>
        <td colspan="2" class="TituloResultado">3er SEMESTRE</td>
      </tr>

      <tr>
        <td>Fecha liquidación</td>
        <td><input type="date" id="FechaLiquidacion3" name="FechaLiquidacion3" value="2024-09-15"></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="TipoInteres3">% Tipo de interés:</label></td>
        <td>
          <div class="input-PorcientoWrapper">
            <input type="text" id="TipoInteres3" name="TipoInteres3" value="3.75" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr id="ImporteReintegroContainer3">
        <td><label for="ImporteReintegro3">Importe reintegro (euros):</label></td>
        <td>
          <div class="input-EurosWrapper">
            <input type="text" id="ImporteReintegro3" name="ImporteReintegro3" value="800" class="input-field">
          </div>
        </td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td><label for="FechaReintegro3">Fecha reintegro:</label></td>
        <td><input type="date" id="FechaReintegro3" name="FechaReintegro3" value="2024-04-15"></td>
        <td class="error-message-cell"></td> <!-- Columna para el mensaje de error -->
      </tr>

      <tr>
        <td></td>
        <td></td>
      </tr>

      <tr>
        <td></td>
        <td></td>
      </tr>

      <tr>
        <td>
          <br>
          <center><button type="button" onclick="calcularLiquidacion()">Calcular Liquidación</button></center>
        </td>
      </tr>
    </table>
  </form>
  <!-- <p>&nbsp;</p> -->
  <div id="resultados" style="display: none;">
    <!-- <div id="resultados"> -->
    <h2>Resultados</h2>
    <table class="resultados">
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td colspan="2" class="TituloResultado">LIQUIDACIÓN PRIMER SEMESTRE</td>
        <td>&nbsp;</td>
        <td colspan="2" class="TituloResultado">LIQUIDACIÓN SEGUNDO SEMESTRE</td>
        <td>&nbsp;</td>
        <td colspan="2" class="TituloResultado">LIQUIDACIÓN TERCER SEMESTRE</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>Importe vivo</td>
        <td class="euro-cell" id="ImporteVivoL1"></td>
        <td></td>
        <td>Importe vivo</td>
        <td class="euro-cell" id="ImporteVivoL2"></td>
        <td></td>
        <td>Importe vivo</td>
        <td class="euro-cell" id="ImporteVivoL3"></td>
      </tr>
      <tr>
        <td>Fecha liquidación</td>
        <td id="FechaLiquidacionL1"></td>
        <td></td>
        <td>Fecha liquidación</td>
        <td id="FechaLiquidacionL2"></td>
        <td></td>
        <td>Fecha liquidación</td>
        <td id="FechaLiquidacionL3"></td>
      </tr>
      <tr>
        <td>Días transcurridos</td>
        <td id="DiasTranscurridosL1"></td>
        <td></td>
        <td>Días transcurridos</td>
        <td id="DiasTranscurridosL2"></td>
        <td></td>
        <td>Días transcurridos</td>
        <td id="DiasTranscurridosL3"></td>
      </tr>
      <tr>
        <td>Tipo de interés</td>
        <td class="percent-cell" id="PorcentajeTipoInteresL1"></td>
        <td></td>
        <td>Tipo de interés</td>
        <td class="percent-cell" id="PorcentajeTipoInteresL2"></td>
        <td></td>
        <td>Tipo de interés</td>
        <td class="percent-cell" id="PorcentajeTipoInteresL3"></td>
      </tr>
      <tr>
        <td>Intereses Euros</td>
        <td class="euro-cell" id="InteresesEurosL1"></td>
        <td></td>
        <td>Intereses Euros</td>
        <td class="euro-cell" id="InteresesEurosL2"></td>
        <td></td>
        <td>Intereses Euros</td>
        <td class="euro-cell" id="InteresesEurosL3"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>% Retención </td>
        <td class="percent-cell" id="PorcentajeRetencionL1"></td>
        <td></td>
        <td>% Retención </td>
        <td class="percent-cell" id="PorcentajeRetencionL2"></td>
        <td></td>
        <td>% Retención </td>
        <td class="percent-cell" id="PorcentajeRetencionL3"></td>
      </tr>
      <tr>
        <td>Retención Euros</td>
        <td class="euro-cell" id="RetencionEurosL1"></td>
        <td></td>
        <td>Retención Euros</td>
        <td class="euro-cell" id="RetencionEurosL2"></td>
        <td></td>
        <td>Retención Euros</td>
        <td class="euro-cell" id="RetencionEurosL3"></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td class="TituloSimulacion" id="SimulacionLiquidacionL1">Simulación liquidación</td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;" class="TituloSimulacion"
          id="SimulacionLiquidacionL2">Simulación liquidación</td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;" class="TituloSimulacion"
          id="SimulacionLiquidacionL3">Simulación liquidación</td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;"></td>
      </tr>

      <tr>
        <td style="border-top: 1px solid black; border-left: 1px solid black;">&nbsp;</td>
        <td style="border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-left: 1px solid black;"></td>
        <td style="border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-left: 1px solid black;"></td>
        <td style="border-right: 1px solid black;"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black;" class="clase-sangria"> +Intereses</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasInteresesL1"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> +Intereses</td>
        <td style="border-right:  1px solid black;" class="euro-cell" id="MasInteresesL2"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> +Intereses</td>
        <td style="border-right:  1px solid black;" class="euro-cell" id="MasInteresesL3"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Retención</td>
        <td style=" border-right: 1px solid black;" class="euro-cell" id="MenosRetencionL1"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Retención</td>
        <td style=" border-right: 1px solid black;" class="euro-cell" id="MenosRetencionL2"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Retención</td>
        <td style=" border-right: 1px solid black;" class="euro-cell" id="MenosRetencionL3"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black;">&nbsp;</td>
        <td style="border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-left: 1px solid black;"></td>
        <td style="border-right: 1px solid black;"></td>
        <td style="border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-right: 1px solid black;"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black; border-bottom: 1px solid black;">&nbsp;</td>
        <td class="total-row euro-cell" id="ResultadoL1"></td>
        <td></td>
        <td style="border-left: 1px solid black; border-bottom: 1px solid black;">&nbsp;</td>
        <td class="total-row euro-cell" id="ResultadoL2"></td>
        <td style="border-right: 1px solid black;"></td>
        <td style="border-left: 1px solid black; border-bottom: 1px solid black;">&nbsp;</td>
        <td class="total-row euro-cell" id="ResultadoL3"></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td colspan="2" class="TituloResultado">REINTEGRO PRIMER SEMESTRE</td>
        <td></td>
        <td colspan="2" class="TituloResultado">REINTEGRO SEGUNDO SEMESTRE</td>
        <td></td>
        <td colspan="2" class="TituloResultado">REINTEGRO TERCER SEMESTRE</td>
      </tr>
      <tr>
        <td>Importe Reintegro</td>
        <td class="euro-cell" id="ImporteReintegroR1"></td>
        <td></td>
        <td>Importe Reintegro</td>
        <td class="euro-cell" id="ImporteReintegroR2"></td>
        <td></td>
        <td>Importe Reintegro</td>
        <td class="euro-cell" id="ImporteReintegroR3"></td>
      </tr>
      <tr>
        <td>Fecha reintegro</td>
        <td id="FechaReintegroR1"></td>
        <td></td>
        <td>Fecha reintegro</td>
        <td id="FechaReintegroR2"></td>
        <td></td>
        <td>Fecha reintegro</td>
        <td id="FechaReintegroR3"></td>
      </tr>
      <tr>
        <td>% Penalización</td>
        <td class="percent-cell" id="PorcentajePenalizacionR1"></td>
        <td></td>
        <td>% Penalización</td>
        <td class="percent-cell" id="PorcentajePenalizacionR2"></td>
        <td></td>
        <td>% Penalización</td>
        <td class="percent-cell" id="PorcentajePenalizacionR3"></td>
      </tr>
      <tr>
        <td>Días transcurridos desde inicio</td>
        <td id="DiasTranscurridosR1"></td>
        <td></td>
        <td>Días transcurridos</td>
        <td id="DiasTranscurridosR2"></td>
        <td></td>
        <td>Días transcurridos</td>
        <td id="DiasTranscurridosR3"></td>
      </tr>
      <tr>
        <td>Días transcurridos desde anterior liquidación</td>
        <td id="DiasTranscurridosDesdeAnteriorLiquidacionR1"></td>
        <td></td>
        <td>Días transcurridos desde anterior liquidación</td>
        <td id="DiasTranscurridosDesdeAnteriorLiquidacionR2"></td>
        <td></td>
        <td>Días transcurridos desde anterior liquidación</td>
        <td id="DiasTranscurridosDesdeAnteriorLiquidacionR3"></td>
      </tr>
      <tr>
        <td>Intereses reintegro</td>
        <td class="euro-cell" id="InteresesReintegorR1"></td>
        <td></td>
        <td>Intereses reintegro</td>
        <td class="euro-cell" id="InteresesReintegorR2"></td>
        <td></td>
        <td>Intereses reintegro</td>
        <td class="euro-cell" id="InteresesReintegorR3"></td>
      </tr>
      <tr>
        <td>Penalización Euros</td>
        <td class="euro-cell" id="PenalizacionEurosR1"></td>
        <td></td>
        <td>Penalización Euros</td>
        <td class="euro-cell" id="PenalizacionEurosR2"></td>
        <td></td>
        <td>Penalización Euros</td>
        <td class="euro-cell" id="PenalizacionEurosR3"></td>
      </tr>
      <tr>
        <td>Máximo intereses brutos</td>
        <td class="euro-cell" id="MaximoInteresesBrutosR1"></td>
        <td></td>
        <td>Máximo intereses brutos</td>
        <td class="euro-cell" id="MaximoInteresesBrutosR2"></td>
        <td></td>
        <td>Máximo intereses brutos</td>
        <td class="euro-cell" id="MaximoInteresesBrutosR3"></td>
      </tr>
      <tr>
        <td>Penalización a aplicar</td>
        <td class="euro-cell" id="PenalizacionAplicarR1"></td>
        <td></td>
        <td>Penalización a aplicar</td>
        <td class="euro-cell" id="PenalizacionAplicarR2"></td>
        <td></td>
        <td>Penalización a aplicar</td>
        <td class="euro-cell" id="PenalizacionAplicarR3"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>% Retención </td>
        <td class="percent-cell" id="PorcentajeRetencionR1"></td>
        <td></td>
        <td>% Retención </td>
        <td class="percent-cell" id="PorcentajeRetencionR2"></td>
        <td></td>
        <td>% Retención </td>
        <td class="percent-cell" id="PorcentajeRetencionR3"></td>
      </tr>
      <tr>
        <td>Retención Euros</td>
        <td class="euro-cell" id="RetencionEurosR1"></td>
        <td></td>
        <td>Retención Euros</td>
        <td class="euro-cell" id="RetencionEurosR2"></td>
        <td></td>
        <td>Retención Euros</td>
        <td class="euro-cell" id="RetencionEurosR3"></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td class="TituloSimulacion">Simulación reintegro</td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;" class="TituloSimulacion">Simulación
          reintegro</td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;" class="TituloSimulacion">Simulación
          reintegro</td>
        <td style="border-top: 1px solid black; border-right: 1px solid black;"></td>
        </td>
      </tr>
      <tr>
        <td style="border-top: 1px solid black; border-left: 1px solid black;" class="clase-sangria"> +Capital</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasCapitalR1"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-left: 1px solid black;" class="clase-sangria"> +Capital</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasCapitalR2"></td>
        <td></td>
        <td style="border-top: 1px solid black; border-left: 1px solid black;" class="clase-sangria"> +Capital</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasCapitalR3"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black;" class="clase-sangria"> +Intereses</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasInteresesR1"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> +Intereses</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasInteresesR2"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> +Intereses</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MasInteresesR3"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Retención</td>
        <td style=" border-right: 1px solid black;" class="euro-cell" id="MenosRetencionR1"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Retención</td>
        <td style=" border-right: 1px solid black;" class="euro-cell" id="MenosRetencionR2"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Retención</td>
        <td style=" border-right: 1px solid black;" class="euro-cell" id="MenosRetencionR3"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Penalización</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MenosPenalizacionR1"></td>
        <td></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Penalización</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MenosPenalizacionR2"></td>
        <td style="border-right: 1px solid black;"></td>
        <td style="border-left: 1px solid black;" class="clase-sangria"> -Penalización</td>
        <td style="border-right: 1px solid black;" class="euro-cell" id="MenosPenalizacionR3"></td>
      </tr>
      <tr>
        <td style="border-left: 1px solid black; border-bottom: 1px solid black;">&nbsp;</td>
        <td class="total-row euro-cell" id="ResultadoR1"></td>
        <td></td>
        <td style="border-left: 1px solid black; border-bottom: 1px solid black;"></td>
        <td class="total-row euro-cell" id="ResultadoR2"></td>
        <td></td>
        <td style="border-left: 1px solid black; border-bottom: 1px solid black;"></td>
        <td class="total-row euro-cell" id="ResultadoR3"></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </div>
</body>


<script>
  // Código jQuery
  $(document).ready(function () {
    // Aplica a los campos que contengan 'importe' en su id
    $('input[id*="importe"], input[id*="Importe"], input[id*="INTERES"], input[id*="Interes"], input[id*="PORCENTAJE"], input[id*="Porcentaje"], input[id*="REINTEGRO"], input[id*="Reintegro"]').not('input[id^="FechaReintegro"]').each(function () {

      let realValue = $(this).val();
      $(this).data('realvalue', realValue);

      // Format to locale
      let formattedValue = formatearNumero(parseFloat(realValue));
      $(this).val(formattedValue);

      $(this).on('input', function () {
        let thisVal = $(this).val();
        thisVal = thisVal.replace(/\./g, '').replace(',', '.'); // Limpieza
        $(this).data('realvalue', thisVal);
        thisVal = formatearNumero(parseFloat(thisVal));
        $(this).val(thisVal);
      });
    });
  });

  $(document).ready(function () {
    $('#FechaInicio').on('change', function () {
      var fechaInicio = new Date($(this).val());

      // Verifica que la fecha es válida
      if (!isNaN(fechaInicio.getTime())) {
        // Añade 18 meses a la fecha de inicio
        fechaInicio.setMonth(fechaInicio.getMonth() + 18);

        // Formatea la fecha de vencimiento como YYYY-MM-DD
        var fechaVencimiento = fechaInicio.toISOString().split('T')[0];

        // Actualiza el campo "FechaVencimiento" con la nueva fecha calculada
        $('#FechaVencimiento').val(fechaVencimiento);
      }
    });
  });





  function mostrarError(inputId, message) {
    clearErrors();

    var inputElement = document.getElementById(inputId);
    inputElement.classList.add('input-error'); // Añadir la clase 'input-error' al input

    // Buscar la celda que contiene el input
    var inputCell = inputElement.closest('td');

    // Buscar la celda del mensaje de error
    var errorCell = inputCell.nextElementSibling;

    // Crear el elemento del mensaje de error
    var errorMessageElement = document.createElement('span');
    errorMessageElement.className = 'input-error-message';
    errorMessageElement.innerText = message;

    // Añadir el mensaje de error a la celda de error
    errorCell.appendChild(errorMessageElement);
  }







  // function mostrarError(campoId, mensaje) {
  //   let error = document.createElement('div');
  //   error.textContent = mensaje;
  //   error.style.color = 'red';
  //   error.style.display = 'inline-block';  // Para que el mensaje se muestre en línea

  //   let inputField = document.getElementById(campoId);
  //   inputField.style.border = '1px solid red';

  //   inputField.parentNode.style.display = 'flex';  // Para que el campo de entrada y el mensaje se muestren en línea
  //   inputField.after(error);
  // }


  function clearErrors() {
    // Buscar todos los campos de entrada y limpiar los errores
    document.querySelectorAll('input').forEach(function (inputElement) {
      // Remover la clase 'input-error' del input
      inputElement.classList.remove('input-error');

      // Limpiar el mensaje de error
      var errorCell = inputElement.closest('td').nextElementSibling;
      if (errorCell) {
        errorCell.innerHTML = '';
      }
    });
  }


  function validarCampos() {

    clearErrors();

    const campos = {
      "Importe": "El Importe",
      "FechaInicio": "La fecha de inicio",
      "FechaLiquidacion1": "La fecha de liquidación del 1er Semestre",
      "FechaLiquidacion2": "La fecha de liquidación del 2º Semestre",
      "FechaLiquidacion3": "La fecha de liquidación del 3er Semestre",
      "FechaVencimiento": "La fecha de vencimiento",
      "PorcentajeRetencion": "La retención",
      "PorcentajePenalizacion": "El porcentaje de penalización",
      "TipoInteres1": "El porcentaje de tipo de interés del 1er Semestre",
      "TipoInteres2": "El porcentaje de tipo de interés del 2º Semestre",
      "TipoInteres3": "El porcentaje de tipo de interés del 3er Semestre",
      "ImporteReintegro1": "El Importe reintegrado del 1er Semestre",
      "ImporteReintegro2": "El Importe reintegrado del 2º Semestre",
      "ImporteReintegro3": "El Importe reintegrado del 3er Semestre",
      "FechaReintegro1": "La fecha de reintegro del 1er Semestre",
      "FechaReintegro2": "La fecha de reintegro del 2º Semestre",
      "FechaReintegro3": "La fecha de reintegro del 3er Semestre"
    };

    for (let campo in campos) {
      // Si el campo es una fecha, obtén su valor directamente
      // Si no, obtén el valor real (sin formato) del atributo data-realvalue
      let valor = campo.toLowerCase().includes("fecha") ?
        document.getElementById(campo).value.trim() :
        $("#" + campo).data('realvalue');
      valor = valor ? valor.trim() : "";

      if (campo.toLowerCase().includes("fecha")) {
        const fecha = new Date(valor);
        if (isNaN(fecha.getTime())) {
          mostrarError(campo, `El valor de '${campos[campo]}' no es una fecha válida.`);
          return false;
        }
      } else if (valor === "" || isNaN(valor) || parseFloat(valor) < 0) {
        mostrarError(campo, `'${campos[campo]}' es obligatorio y debe ser un valor numérico superior a 0.`);
        return false;
      }
    }




    const FechaInicio = new Date(document.getElementById("FechaInicio").value);
    const FechaVencimiento = new Date(document.getElementById("FechaVencimiento").value);

    const FechaLiquidacion1 = new Date(document.getElementById("FechaLiquidacion1").value);
    const FechaLiquidacion2 = new Date(document.getElementById("FechaLiquidacion2").value);
    const FechaLiquidacion3 = new Date(document.getElementById("FechaLiquidacion3").value);
    const FechaReintegro1 = new Date(document.getElementById("FechaReintegro1").value);
    const FechaReintegro2 = new Date(document.getElementById("FechaReintegro2").value);
    const FechaReintegro3 = new Date(document.getElementById("FechaReintegro3").value);

    // Creamos un objeto para mapear cada fecha con la que debe ser posterior.
    // Las fechas que no tienen una fecha anterior se mapean a null.
    const fechas = {
      "FechaInicio": null,
      "FechaVencimiento": "FechaInicio",
      "FechaLiquidacion1": "FechaInicio",
      "FechaLiquidacion2": "FechaLiquidacion1",
      "FechaLiquidacion3": "FechaLiquidacion2",
      "FechaReintegro1": "FechaInicio",
      "FechaReintegro2": "FechaReintegro1",
      "FechaReintegro3": "FechaReintegro2",
    };

    // Iteramos sobre cada fecha en el objeto 'fechas'.
    for (let fecha in fechas) {

      // Obtenemos la fecha que debería ser anterior a la actual.
      const fechaAnterior = fechas[fecha];

      // Si hay una fecha anterior (es decir, si fechaAnterior no es null),
      // comparamos la fecha con su fecha anterior.
      if (fechaAnterior) {

        // Creamos objetos de Date con los valores de los campos de entrada correspondientes.
        const fechaActual = new Date(document.getElementById(fecha).value);
        const fechaAnt = new Date(document.getElementById(fechaAnterior).value);

        // Si la fecha es anterior o igual a su fecha anterior, mostramos un error.
        if (fechaActual <= fechaAnt) {
          mostrarError(fecha, `La fecha '${fechaActual.toLocaleDateString()}' debe ser posterior a la fecha anterior '${fechaAnt.toLocaleDateString()}'.`);
          // Salimos de la función, ya que hemos encontrado un error.
          return false;
        }
      }
    }



    // if (FechaVencimiento < FechaInicio) {
    //   alert("Error: La 'fecha de Vencimiento' debe ser posterior a la 'Fecha de Inicio'.");
    //   return false;
    // }
    // if (FechaLiquidacion1 < FechaLiquidacion2) {
    //   alert("Error: La 'fecha de liquidación del 1er Semestre' debe ser posterior a la 'fecha de inicio'.");
    //   return false;
    // }
    // if (fechaReintegro < fechaInicio) {
    //   alert("Error: La 'fecha de reintegro' debe ser posterior a la 'fecha de inicio'.");
    //   return false;
    // }
    // if (fechaReintegro < fechaInicio || fechaReintegro > fechaVencimiento) {
    //   alert("Error: La 'fecha de reintegro' no es válida. Debe ser mayor a la 'fecha de inicio' y menor a la 'fecha de vencimiento'.");
    //   return false;
    // }

    return true;
  }

  // Crea una función para mostrar los resultados
  function showResults() {

    const resultadosDiv = document.getElementById("resultados");
    resultadosDiv.style.display = "block";

  }

  // Función que se ejecuta cuando se presiona una tecla en el formulario
  function handleKeyDown(event) {
    if (event.key === 'Enter') {
      event.preventDefault(); // Evita la acción predeterminada del evento (por ejemplo, enviar el formulario)
      calcularLiquidacion(); // Llama a la función para calcular la liquidación
    }
  }

  // Agrega el event listener al objeto document
  document.addEventListener("keydown", handleKeyDown);

  function hideResults() {
    const resultadosDiv = document.getElementById("resultados");
    resultadosDiv.style.display = "none";
  }

  function calcularDuracion(FechaInicio, fechaFin) {
    const MS_PER_DAY = 1000 * 60 * 60 * 24;
    const DIAS_EN_UN_MES = 30.44;
    const duracionMeses = (fechaFin - FechaInicio) / (MS_PER_DAY * DIAS_EN_UN_MES);
    const duracionDias = Math.round((fechaFin - FechaInicio) / MS_PER_DAY);

    return {
      duracionMeses,
      duracionDias
    };
  }


  function formatearNumero(numero) {
    return numero.toLocaleString("es-ES", {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2,
      useGrouping: true,
    });
  }

  function formatearFecha(fecha) {
    return fecha.toLocaleDateString("es-ES");
  }

  function rellenarCamposAnidados(obj) {
    for (var key in obj) {
      if (obj.hasOwnProperty(key)) {
        var subObj = obj[key];
        for (var subKey in subObj) {
          if (subObj.hasOwnProperty(subKey)) {
            var subArray = subObj[subKey];
            for (var i = 0; i < subArray.length; i++) {
              var fullKey = subKey + key + (i + 1); // Construir el id del elemento
              var elem = document.getElementById(fullKey);
              if (elem) {
                if (subArray[i] instanceof Date) {
                  elem.innerText = formatearFecha(subArray[i]);
                } else {
                  // Verificar si la subKey contiene "dias" antes de formatear el número
                  if (!subKey.includes("Dias")) {
                    elem.innerText = formatearNumero(subArray[i]);
                  } else {
                    elem.innerText = subArray[i]; // Si la subKey contiene "dias", no formatear el número
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  // Establecer eventos para ejecutar CalcularLiquidacion cuando se modifiquen los campos
  const campos = [
    "Importe",
    "FechaInicio",
    "FechaVencimiento",
    "PorcentajePenalizacion",
    "PorcentajeRetencion",
    "FechaLiquidacion1",
    "FechaLiquidacion2",
    "FechaLiquidacion3",
    "TipoInteres1",
    "TipoInteres2",
    "TipoInteres3",
    "ImporteReintegro1",
    "ImporteReintegro2",
    "ImporteReintegro3",
    "FechaReintegro1",
    "FechaReintegro2",
    "FechaReintegro3"
  ];



  for (let i = 0; i < campos.length; i++) {
    document.getElementById(campos[i]).addEventListener("change", hideResults);
  }



  function calcularLiquidacion() {




    // Obtén los valores de los elementos de entrada
    const Importe = parseFloat($("#Importe").data('realvalue'));
    // Similar para los demás campos
    const PorcentajePenalizacion = parseFloat($("#PorcentajePenalizacion").data('realvalue'));
    const PorcentajeRetencion = parseFloat($("#PorcentajeRetencion").data('realvalue'));

    const PorcentajeTipoInteres1 = parseFloat($("#TipoInteres1").data('realvalue')) / 100;
    const PorcentajeTipoInteres2 = parseFloat($("#TipoInteres2").data('realvalue')) / 100;
    const PorcentajeTipoInteres3 = parseFloat($("#TipoInteres3").data('realvalue')) / 100;

    const ImporteReintegro1 = parseFloat($("#ImporteReintegro1").data('realvalue'));
    const ImporteReintegro2 = parseFloat($("#ImporteReintegro2").data('realvalue'));
    const ImporteReintegro3 = parseFloat($("#ImporteReintegro3").data('realvalue'));


    const FechaInicio = new Date(document.getElementById("FechaInicio").value);
    const FechaVencimiento = new Date(document.getElementById("FechaVencimiento").value);

    const FechaLiquidacion1 = new Date(document.getElementById("FechaLiquidacion1").value);
    const FechaLiquidacion2 = new Date(document.getElementById("FechaLiquidacion2").value);
    const FechaLiquidacion3 = new Date(document.getElementById("FechaLiquidacion3").value);

    const FechaReintegro1 = new Date(document.getElementById("FechaReintegro1").value);
    const FechaReintegro2 = new Date(document.getElementById("FechaReintegro2").value);
    const FechaReintegro3 = new Date(document.getElementById("FechaReintegro3").value);


    // Validar los campos
    if (!validarCampos()) {
      return;
    }


    const FechaLiquidacionL1 = FechaLiquidacion1;
    const FechaLiquidacionL2 = FechaLiquidacion2;
    const FechaLiquidacionL3 = FechaLiquidacion3;

    const FechaReintegroR1 = FechaReintegro1;
    const FechaReintegroR2 = FechaReintegro2;
    const FechaReintegroR3 = FechaReintegro3;

    const PorcentajeTipoInteresL1 = PorcentajeTipoInteres1 * 100;
    const PorcentajeTipoInteresL2 = PorcentajeTipoInteres2 * 100;
    const PorcentajeTipoInteresL3 = PorcentajeTipoInteres3 * 100;

    const PorcentajeRetencionL1 = PorcentajeRetencion * 100;
    const PorcentajeRetencionL2 = PorcentajeRetencion * 100;
    const PorcentajeRetencionL3 = PorcentajeRetencion * 100;

    const PorcentajeRetencionR1 = PorcentajeRetencion * 100;
    const PorcentajeRetencionR2 = PorcentajeRetencion * 100;
    const PorcentajeRetencionR3 = PorcentajeRetencion * 100;


    const ImporteReintegroR1 = ImporteReintegro1;
    const ImporteReintegroR2 = ImporteReintegro2;
    const ImporteReintegroR3 = ImporteReintegro3;

    const PorcentajePenalizacionR1 = PorcentajePenalizacion * 100;
    const PorcentajePenalizacionR2 = PorcentajePenalizacion * 100;
    const PorcentajePenalizacionR3 = PorcentajePenalizacion * 100;

    //Calcular Liquidaciones

    const ImporteVivoL1 = Importe - ImporteReintegroR1;
    const ImporteVivoL2 = ImporteVivoL1 - ImporteReintegroR2;
    const ImporteVivoL3 = ImporteVivoL2 - ImporteReintegroR3;

    const DiasTranscurridosL1 = Math.abs(calcularDuracion(FechaInicio, FechaLiquidacionL1).duracionDias);
    const DiasTranscurridosL2 = Math.abs(calcularDuracion(FechaLiquidacionL1, FechaLiquidacionL2).duracionDias);
    const DiasTranscurridosL3 = Math.abs(calcularDuracion(FechaLiquidacionL2, FechaLiquidacionL3).duracionDias);

    const InteresesEurosL1 = ImporteVivoL1 * PorcentajeTipoInteres1 * DiasTranscurridosL1 / 365;
    const InteresesEurosL2 = ImporteVivoL2 * PorcentajeTipoInteres2 * DiasTranscurridosL2 / 365;
    const InteresesEurosL3 = ImporteVivoL3 * PorcentajeTipoInteres3 * DiasTranscurridosL3 / 365;

    const RetencionEurosL1 = InteresesEurosL1 * PorcentajeRetencion;
    const RetencionEurosL2 = InteresesEurosL2 * PorcentajeRetencion;
    const RetencionEurosL3 = InteresesEurosL3 * PorcentajeRetencion;

    const MasInteresesL1 = Math.abs(InteresesEurosL1);
    const MasInteresesL2 = Math.abs(InteresesEurosL2);
    const MasInteresesL3 = Math.abs(InteresesEurosL3);

    const MenosRetencionL1 = RetencionEurosL1 * -1;
    const MenosRetencionL2 = RetencionEurosL2 * -1;
    const MenosRetencionL3 = RetencionEurosL3 * -1;

    const ResultadoL1 = Math.abs(MasInteresesL1 + MenosRetencionL1);
    const ResultadoL2 = Math.abs(MasInteresesL2 + MenosRetencionL2);
    const ResultadoL3 = Math.abs(MasInteresesL3 + MenosRetencionL3);

    //Calcular Reintegros

    const DiasTranscurridosR1 = Math.abs(calcularDuracion(FechaInicio, FechaReintegroR1).duracionDias);
    const DiasTranscurridosR2 = Math.abs(calcularDuracion(FechaInicio, FechaReintegroR2).duracionDias);
    const DiasTranscurridosR3 = Math.abs(calcularDuracion(FechaInicio, FechaReintegroR3).duracionDias);

    const DiasTranscurridosDesdeAnteriorLiquidacionR1 = Math.abs(DiasTranscurridosR1);
    const DiasTranscurridosDesdeAnteriorLiquidacionR2 = Math.abs(calcularDuracion(FechaReintegroR2, FechaLiquidacionL1).duracionDias);
    const DiasTranscurridosDesdeAnteriorLiquidacionR3 = Math.abs(calcularDuracion(FechaReintegroR3, FechaLiquidacionL2).duracionDias);

    const InteresesReintegorR1 = Math.abs(ImporteReintegroR1) * PorcentajeTipoInteres1 * DiasTranscurridosR1 / 365;
    const InteresesReintegorR2 = Math.abs(ImporteReintegroR2) * PorcentajeTipoInteres2 * DiasTranscurridosDesdeAnteriorLiquidacionR2 / 365;
    const InteresesReintegorR3 = Math.abs(ImporteReintegroR3) * PorcentajeTipoInteres3 * DiasTranscurridosDesdeAnteriorLiquidacionR3 / 365;

    const PenalizacionEurosR1 = Math.abs(ImporteReintegroR1) * PorcentajePenalizacion * DiasTranscurridosR1 / 365;
    const PenalizacionEurosR2 = Math.abs(ImporteReintegroR2) * PorcentajePenalizacion * DiasTranscurridosR2 / 365;
    const PenalizacionEurosR3 = Math.abs(ImporteReintegroR3) * PorcentajePenalizacion * DiasTranscurridosR3 / 365;

    const RetencionEurosR1 = Math.abs(InteresesReintegorR1) * PorcentajeRetencion;
    const RetencionEurosR2 = Math.abs(InteresesReintegorR2) * PorcentajeRetencion;
    const RetencionEurosR3 = Math.abs(InteresesReintegorR3) * PorcentajeRetencion;

    const MasCapitalR1 = Math.abs(ImporteReintegroR1);
    const MasCapitalR2 = Math.abs(ImporteReintegroR2);
    const MasCapitalR3 = Math.abs(ImporteReintegroR3);

    const MasInteresesR1 = Math.abs(InteresesReintegorR1);
    const MasInteresesR2 = Math.abs(InteresesReintegorR2);
    const MasInteresesR3 = Math.abs(InteresesReintegorR3);

    const MenosRetencionR1 = RetencionEurosR1 * -1;
    const MenosRetencionR2 = RetencionEurosR2 * -1;
    const MenosRetencionR3 = RetencionEurosR3 * -1;

    const MaximoInteresesBrutosR1 = Math.abs(Importe) * PorcentajeTipoInteres1 * DiasTranscurridosR1 / 365;
    const MaximoInteresesBrutosR2 = MasInteresesL1 + MasInteresesR1 + InteresesEurosL2 + InteresesReintegorR2;

    const MaximoInteresesBrutosR3 = MasInteresesL1 + MasInteresesR1 + InteresesEurosL2 + MasInteresesR2 + InteresesEurosL3 + InteresesReintegorR3;

    const PenalizacionAplicarR1 = (PenalizacionEurosR1 > MaximoInteresesBrutosR1) ? MaximoInteresesBrutosR1 : PenalizacionEurosR1;
    const PenalizacionAplicarR2 = (PenalizacionEurosR2 > MaximoInteresesBrutosR2) ? MaximoInteresesBrutosR2 : PenalizacionEurosR2;
    const PenalizacionAplicarR3 = (PenalizacionEurosR3 > MaximoInteresesBrutosR3) ? MaximoInteresesBrutosR3 : PenalizacionEurosR3;

    const MenosPenalizacionR1 = PenalizacionAplicarR1 * -1;
    const MenosPenalizacionR2 = PenalizacionAplicarR2 * -1;
    const MenosPenalizacionR3 = PenalizacionAplicarR3 * -1;

    const ResultadoR1 = MasCapitalR1 + MasInteresesR1 + MenosRetencionR1 + MenosPenalizacionR1;
    const ResultadoR2 = MasCapitalR2 + MasInteresesR2 + MenosRetencionR2 + MenosPenalizacionR2;
    const ResultadoR3 = MasCapitalR3 + MasInteresesR3 + MenosRetencionR3 + MenosPenalizacionR3;


    var CamposAnidados = {
      L: {
        ImporteVivo: [ImporteVivoL1, ImporteVivoL2, ImporteVivoL3],
        PorcentajeTipoInteres: [PorcentajeTipoInteresL1, PorcentajeTipoInteresL2, PorcentajeTipoInteresL3],
        PorcentajeRetencion: [PorcentajeRetencionL1, PorcentajeRetencionL2, PorcentajeRetencionL3],
        DiasTranscurridos: [DiasTranscurridosL1, DiasTranscurridosL2, DiasTranscurridosL3],
        InteresesEuros: [InteresesEurosL1, InteresesEurosL2, InteresesEurosL3],
        FechaLiquidacion: [FechaLiquidacionL1, FechaLiquidacionL2, FechaLiquidacionL3],
        RetencionEuros: [RetencionEurosL1, RetencionEurosL2, RetencionEurosL3],
        MasIntereses: [MasInteresesL1, MasInteresesL2, MasInteresesL3],
        MenosRetencion: [MenosRetencionL1, MenosRetencionL2, MenosRetencionL3],
        Resultado: [ResultadoL1, ResultadoL2, ResultadoL3]
      },
      R: {
        FechaReintegro: [FechaReintegroR1, FechaReintegroR2, FechaReintegroR3],
        ImporteReintegro: [ImporteReintegroR1, ImporteReintegroR2, ImporteReintegroR3],
        PorcentajePenalizacion: [PorcentajePenalizacionR1, PorcentajePenalizacionR2, PorcentajePenalizacionR3],
        DiasTranscurridos: [DiasTranscurridosR1, DiasTranscurridosR2, DiasTranscurridosR3],
        DiasTranscurridosDesdeAnteriorLiquidacion: [DiasTranscurridosDesdeAnteriorLiquidacionR1, DiasTranscurridosDesdeAnteriorLiquidacionR2, DiasTranscurridosDesdeAnteriorLiquidacionR3],
        InteresesReintegor: [InteresesReintegorR1, InteresesReintegorR2, InteresesReintegorR3],
        PenalizacionEuros: [PenalizacionEurosR1, PenalizacionEurosR2, PenalizacionEurosR3],
        MaximoInteresesBrutos: [MaximoInteresesBrutosR1, MaximoInteresesBrutosR2, MaximoInteresesBrutosR3],
        PenalizacionAplicar: [PenalizacionAplicarR1, PenalizacionAplicarR2, PenalizacionAplicarR3],
        PorcentajeRetencion: [PorcentajeRetencionR1, PorcentajeRetencionR2, PorcentajeRetencionR3],
        RetencionEuros: [RetencionEurosR1, RetencionEurosR2, RetencionEurosR3],
        MasCapital: [MasCapitalR1, MasCapitalR2, MasCapitalR3],
        MasIntereses: [MasInteresesR1, MasInteresesR2, MasInteresesR3],
        MenosRetencion: [MenosRetencionR1, MenosRetencionR2, MenosRetencionR3],
        MenosPenalizacion: [MenosPenalizacionR1, MenosPenalizacionR2, MenosPenalizacionR3],
        Resultado: [ResultadoR1, ResultadoR2, ResultadoR3]
      }
    }


    rellenarCamposAnidados(CamposAnidados);

    // document.getElementById("PenalizacionAplicarR2").innerText = formatearNumero(PenalizacionAplicarR2);
    // document.getElementById("MaximoInteresesBrutosR2").innerText = MaximoInteresesBrutosR2;
    // document.getElementById("MaximoInteresesBrutosR3").innerText = MaximoInteresesBrutosR3;



    showResults();




    // Muestra los resultados en los elementos HTML correspondientes
    //document.getElementById("ImporteVivoL1").innerText = formatearNumero(ImporteVivoL1);
    // document.getElementById("diasTranscurridos").innerText = formatearNumero(diasTranscurridos);
    // document.getElementById("diasRemanentes").innerText = formatearNumero(diasRemanentes);
    // document.getElementById("InteresesEuros").innerText = formatearNumero(InteresesEuros) + " euros";
    // document.getElementById("InteresesEurosReintegro").innerText = formatearNumero(InteresesEurosReintegro) + " euros";
    // document.getElementById("InteresesEurosDevengados").innerText = formatearNumero(InteresesEurosDevengados) + " euros";
    // document.getElementById("retencionEuros").innerText = formatearNumero(retencionEuros) + " euros";
    // document.getElementById("PenalizacionEuros").innerText = formatearNumero(PenalizacionEuros) + " euros";
    // document.getElementById("MaximoInteresesBrutos").innerText = formatearNumero(MaximoInteresesBrutos) + " euros";
    // document.getElementById("penalizacionAplicar").innerText = formatearNumero(penalizacionAplicar) + " euros";
    // document.getElementById("capital").innerText = formatearNumero(capital) + " euros";
    // document.getElementById("intereses").innerText = formatearNumero(InteresesEuros) + " euros";
    // document.getElementById("retencion").innerText = formatearNumero(retencion) + " euros";
    // document.getElementById("penalizacion").innerText = formatearNumero(penalizacion) + " euros";
    // document.getElementById("total").innerText = formatearNumero(total) + " euros";


  }



</script>

</html>